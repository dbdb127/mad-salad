datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id       Int     @id @default(autoincrement())
  email    String  @unique
  password String
  name     String?

  accts      Account[]
  categories Category[]
}

model Account {
  id              Int           @id @default(autoincrement())
  balance         Int           @default(0)
  type            AcctType
  user            User          @relation(fields: [userId], references: [id])
  userId          Int
  transactions    Transaction[] @relation(name: "TransMainAcct")
  transactionsSub Transaction[] @relation(name: "TransSubAcct") //??

}

model Transaction {
  id        Int       @id @default(autoincrement())
  acct      Account   @relation(name: "TransMainAcct", fields: [accNumber], references: [id])
  accNumber Int
  type      TransType
  createdAt DateTime  @default(now())
  amount    Int
  category  Int

  acctSub      Account @relation(name: "TransSubAcct", fields: [accSubNumber], references: [id]) //I dont wanna use this maybe I don't need this
  accSubNumber Int
}

model Category {
  //id String @default("") @id  //should be combination of userId and categoryNum https://stackoverflow.com/questions/53373101/prisma-datamodel-primary-key-as-a-combination-of-two-relational-models
  user        User   @relation(fields: [userId], references: [id])
  userId      Int
  categoryNum Int
  name        String
  balance     Int

  @@id([userId, categoryNum])
}

enum AcctType {
  CHECKING
  SAVING
}

enum TransType {
  SEND
  RECEIVE
  SPEND
  EARN
}
